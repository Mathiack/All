<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relogio Notion</title>
    <link rel="stylesheet" href="../../../styles/styleRelogioNotion.css">
</head>
<body class="dark">
    <div id="container">
        <div id="title">Meu Evento Especial</div>
        <div id="countdown">Carregando...</div>
    </div>
    <div id="settings-btn">⚙️</div>
    <div id="settings">
        <h3>Configurações</h3>
        <label>Título:</label>
        <input type="text" id="new-title" placeholder="Digite o título">
        <label>Data Alvo:</label>
        <input type="datetime-local" id="new-date">
        <label>Tema:</label>
        <select id="new-theme">
            <option value="dark">Escuro</option>
            <option value="light">Claro</option>
        </select>
        <button id="save-btn">Salvar</button>
    </div>

    <script>
        let targetDate = localStorage.getItem('targetDate') ? new Date(localStorage.getItem('targetDate')) : new Date('2024-12-31T23:59:59');
        let title = localStorage.getItem('title') || 'Meu Evento Especial';
        let theme = localStorage.getItem('theme') || 'dark';

        document.getElementById('title').innerHTML = title;
        document.body.className = theme;
        document.getElementById('new-title').value = title;
        document.getElementById('new-date').value = targetDate.toISOString().slice(0, 16);
        document.getElementById('new-theme').value = theme;

        function updateCountdown() {
            const now = new Date();
            const difference = targetDate - now;

            if (difference > 0) {
                const days = Math.floor(difference / (1000 * 60 * 60 * 24));
                const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((difference % (1000 * 60)) / 1000);
                document.getElementById('countdown').innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            } else {
                document.getElementById('countdown').innerHTML = 'Tempo esgotado!';
            }
        }

        // Atualiza a cada segundo
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Abre/fecha configurações
        document.getElementById('settings-btn').addEventListener('click', () => {
            const settings = document.getElementById('settings');
            settings.style.display = settings.style.display === 'block' ? 'none' : 'block';
        });

        // Salva mudanças
        document.getElementById('save-btn').addEventListener('click', () => {
            title = document.getElementById('new-title').value || 'Meu Evento Especial';
            const newDateStr = document.getElementById('new-date').value;
            targetDate = newDateStr ? new Date(newDateStr) : targetDate;
            theme = document.getElementById('new-theme').value;

            localStorage.setItem('title', title);
            localStorage.setItem('targetDate', targetDate.toISOString());
            localStorage.setItem('theme', theme);

            document.getElementById('title').innerHTML = title;
            document.body.className = theme;
            document.getElementById('settings').style.display = 'none';
            updateCountdown();
        });
    </script>
</body>
</html>